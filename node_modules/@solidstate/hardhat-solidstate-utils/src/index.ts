import pkg from '../package.json' with { type: 'json' };
import taskSolidstate from './tasks/solidstate.js';
import taskSolidstateDonate from './tasks/solidstate_donate.js';
import taskSolidstateFunding from './tasks/solidstate_funding.js';
import taskSolidstatePlugins from './tasks/solidstate_plugins.js';
import './type_extensions.js';
import type { HardhatPlugin } from 'hardhat/types/plugins';

const plugin: HardhatPlugin = {
  id: pkg.name,
  npmPackage: pkg.name,
  tasks: [
    taskSolidstate,
    ...(process.env.SOLIDSTATE_DEV
      ? [taskSolidstateDonate, taskSolidstateFunding]
      : []),
    taskSolidstatePlugins,
  ],
  hookHandlers: process.env.SOLIDSTATE_DEV
    ? { hre: () => import('./hooks/hre.js') }
    : {},
};

export default plugin;
